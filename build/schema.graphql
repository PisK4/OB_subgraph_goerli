type MDCCreated @entity(immutable: true) {
  id: Bytes!
  maker: Bytes! # address
  mdc: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
}

type ColumnArrayUpdated @entity(immutable: true) {
  id: Bytes!
  impl: Bytes! # address
  columnArrayHash: Bytes! # bytes32
  dealers: [Bytes!] # address[]
  ebcs: [Bytes!] # address[]
  chainIds: [Int!] # uint16[]
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ResponseMakersUpdated @entity(immutable: true) {
  id: Bytes!
  impl: Bytes! # address
  responseMakers: [Bytes!] # address[]
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type RulesRootUpdated @entity(immutable: true) {
  id: Bytes!
  impl: Bytes! # address
  ebc: Bytes! # address
  rootWithVersion_root: Bytes! # bytes32
  rootWithVersion_version: BigInt! # uint32
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
  input: Bytes!
}

type SpvUpdated @entity(immutable: true) {
  id: Bytes!
  impl: Bytes! # address
  chainId: Int! # uint16
  spv: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type MDC @entity {
  id: ID!
  owner: Bytes! # address
  columnArrayHash: Bytes # bytes32
  responseMakers: [Bytes!] # address[]
  root: Bytes # bytes32
  version: Int # uint32
  spvs: [Bytes!] # address[]
  chainIds: [Int!] # uint16[]
  dealers: [Bytes!] # address[]
  ebc: [EBC!] # EBC
  createblockNumber: BigInt!
  createblockTimestamp: BigInt!
  createtransactionHash: Bytes!
  lastestUpdatetransactionHash: Bytes!

}

type EBC @entity {
  id: ID! #ebc address
  rule: ruleTypes! # ruleTypes
  root: Bytes! # bytes32
  version: Int! # uint32
  sourceChainIds: [BigInt!]! # uint64
  pledgeAmounts: [BigInt!]! # uint128
  token: Bytes # address
  mdcs: [MDC!]!@derivedFrom(field: "ebc") # MDC[]
  lastestUpdatetransactionHash: Bytes!
}

type ruleTypes @entity {
  id: ID!
  chain0: BigInt! # uint64
  chain1: BigInt! # uint64
  chain0Status: Int! # uint8
  chain1Status: Int! # uint8
  chain0Token: BigInt! # uint
  chain1Token: BigInt! # uint
  minPrice: BigInt! # uint128
  maxPrice: BigInt! # uint128
  chain0WithholdingFee: BigInt! # uint128
  chain1WithholdingFee: BigInt! # uint128
  chain0TradeFee: Int! # uint16
  chain1TradeFee: Int! # uint16
  chain0ResponseTime: Int! # uint32
  chain1ResponseTime: Int! # uint32
  chain0CompensationRatio: Int! # uint32
  chain1CompensationRatio: Int! # uint32
}
